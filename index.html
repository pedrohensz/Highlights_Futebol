
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gols pelo mundo</title>
    <style>
        body { background: #e2dedeb4; font-family: Arial; margin: 0; padding: 20px; }
        h1 { text-align: center; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0px 0px 10px #aaa; }
        input, button { padding: 10px; margin: 0; width: 100%; border: 1px solid #ccc; border-radius: 8px; text-align: center;}
        button { background: #4CAF50; color: white; cursor:pointer; font-weight: bold; }
        button:hover { background: #45a049; }
        .botoes { display: flex; gap: 5px; }
    </style>
</head>
<body>

<h1>Gols pelo Mundo üåç</h1>
<div display = "flex">
<button style="width: 200px; height: 50px; display: block; margin: 0 auto;"" onclick="carregarGols()"> Exibir Gols</button>
<button style="width: 200px; height: 50px; display: block; margin: 0 auto;" onclick="carregarPartidas()"> Exibir Partidas</button>
</div>
<div class="container" id="Feed">

</div>

<script>
const API = "http://127.0.0.1:8000";

async function carregarGols() {
    try {
        const response = await fetch(`${API}/Gols`);

        if (!response.ok) {
            throw new Error(`Erro na requisi√ß√£o: ${response.status}`);
        }

        const gols = await response.json();

        console.log("Retorno da API:", gols);

        exibirGols(gols.response);

    } catch (error) {
        console.error("N√£o foi poss√≠vel carregar os dados:", error);
        document.getElementById('Feed').innerHTML += '<p>Erro ao carregar dados.</p>';
    }
}

function exibirGols(listaDeGols) {
    const container = document.getElementById('Feed');

    listaDeGols.forEach(gol => {
        const postDiv = document.createElement('div');
        postDiv.classList.add('post-item');
        const dataDaAPI = gol.date;
        const objetoData = new Date(dataDaAPI);
        const dataFormatadaBR = objetoData.toLocaleDateString('pt-BR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'});
        postDiv.innerHTML = `
            <h2>${gol.title} - ${dataFormatadaBR}</h2>
            <p><strong>Competi√ß√£o:</strong> ${gol.competition}</p>
            <a href="${gol.matchviewUrl}" target="_blank">Assistir ao lance</a>
            <br><br>
            ${gol.videos[0]?.embed || ""}
        `;

        container.appendChild(postDiv);
    });
}

API_PARTIDAS = "http://127.0.0.1:8000"
async function carregarPartidas() {
    try {
        const response = await fetch(`${API_PARTIDAS}/Schedule`);

        if (!response.ok) {
            throw new Error(`Erro na requisi√ß√£o: ${response.status}`);
        }

        const partidas = await response.json();

        console.log("Retorno da API:", partidas);

        exibirPartidas(partidas.response);

    } catch (error) {
        console.error("N√£o foi poss√≠vel carregar os dados:", error);
        document.getElementById('Feed').innerHTML += '<p>Erro ao carregar dados.</p>';
    }
}

function exibirPartidas(listaDePartidas) {
    const container = document.getElementById('Feed');

    listaDePartidas.forEach(partida => {
        const postDiv = document.createElement('div');
        postDiv.classList.add('post-item');
        postDiv.innerHTML = `
            <h2>${partida.area}</h2>
            <p><strong>Competi√ß√£o:</strong> ${partida.competition}</p>
            <h2>${partida.season}</h2>
            <h2>${partida.homeTeam}</h2>
            <h2>${partida.awayTeam}</h2>
            <br><br>
        `;

        container.appendChild(postDiv);
    });
}

</script>

</body>
</html>